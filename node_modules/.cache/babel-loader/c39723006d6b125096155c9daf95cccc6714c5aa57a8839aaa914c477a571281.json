{"ast":null,"code":"// ==================================================\n// src/services/api.js\n// Centralized Axios API setup for all modules:\n// Farmer | Retailer | Transporter | Product | Order | Cart | Transport\n// ==================================================\n\nimport axios from \"axios\";\n\n// ==================================================\n//                    BASE SETUP\n// ==================================================\nconst BASE_URL = \"http://localhost:8080/api\";\nconst api = axios.create({\n  baseURL: BASE_URL,\n  withCredentials: false,\n  // Spring Boot app is stateless (no cookies)\n  headers: {\n    \"Content-Type\": \"application/json\",\n    Accept: \"application/json\"\n  }\n});\n\n// ==================================================\n//                AUTH INTERCEPTOR\n// ==================================================\napi.interceptors.request.use(config => {\n  try {\n    const farmer = JSON.parse(localStorage.getItem(\"farmer\"));\n    const retailer = JSON.parse(localStorage.getItem(\"retailer\"));\n    const transporter = JSON.parse(localStorage.getItem(\"transporter\"));\n    const user = farmer || retailer || transporter;\n\n    // âœ… Add Basic Auth (for Spring Security)\n    if (user && user.email && user.password) {\n      const token = btoa(`${user.email}:${user.password}`);\n      config.headers.Authorization = `Basic ${token}`;\n    } else {\n      delete config.headers.Authorization;\n    }\n\n    // âœ… (Optional future JWT support)\n    // const token = localStorage.getItem(\"token\");\n    // if (token) config.headers.Authorization = `Bearer ${token}`;\n  } catch (err) {\n    console.warn(\"âš ï¸ Axios Interceptor Error:\", err);\n  }\n  return config;\n});\n\n// ==================================================\n//                    AUTH APIS\n// ==================================================\n\n// ðŸ‘¨â€ðŸŒ¾ Farmer Authentication\nexport const authAPI = {\n  farmerSignup: data => api.post(\"/auth/farmer/register\", data),\n  farmerLogin: data => api.post(\"/auth/farmer/login\", data)\n};\n\n// ðŸ›ï¸ Retailer Authentication\nexport const retailerAuthAPI = {\n  signup: data => api.post(\"/retailer/auth/signup\", data),\n  login: data => api.post(\"/retailer/auth/login\", data)\n};\n\n// ðŸšš Transporter Authentication\nexport const transporterAPI = {\n  signup: data => api.post(\"/transporters/signup\", data),\n  login: data => api.post(\"/transporters/login\", data),\n  getAll: () => api.get(\"/transporters\") // for admin dropdown\n};\n\n// ==================================================\n//                    FARMER APIS\n// ==================================================\nexport const farmerAPI = {\n  getAllFarmers: () => api.get(\"/farmers\"),\n  getFarmerById: id => api.get(`/farmers/${id}`)\n};\n\n// ==================================================\n//                    PRODUCT APIS\n// ==================================================\nexport const productAPI = {\n  addProduct: formData => api.post(\"/products/add\", formData, {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\"\n    }\n  }),\n  getMyProducts: () => api.get(\"/products/my\"),\n  getFarmerProducts: farmerId => api.get(`/products/farmer/${farmerId}`),\n  getAllProducts: () => api.get(\"/products\")\n};\n\n// ==================================================\n//                    RETAILER APIS\n// ==================================================\nexport const retailerAPI = {\n  getAllFarmersWithProducts: () => api.get(\"/farmers/with-products\"),\n  getFarmerById: farmerId => api.get(`/farmers/${farmerId}`)\n};\n\n// ==================================================\n//                    CART APIS\n// ==================================================\nexport const cartAPI = {\n  addToCart: (retailerId, productId, quantity) => api.post(\"/cart/add\", {\n    retailerId,\n    productId,\n    quantity\n  }, {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }),\n  getCart: retailerId => api.get(`/cart/${retailerId}`),\n  updateQuantity: (itemId, payload) => api.put(`/cart/update/${itemId}`, payload, {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }),\n  removeItem: itemId => api.delete(`/cart/remove/${itemId}`),\n  clearCart: retailerId => api.delete(`/cart/clear/${retailerId}`)\n};\n\n// ==================================================\n//                    ORDER APIS\n// ==================================================\nexport const orderAPI = {\n  placeOrder: (retailerId, paymentMethod = \"Online\") => api.post(`/orders/place/${retailerId}?paymentMethod=${paymentMethod}`),\n  getOrders: retailerId => api.get(`/orders/${retailerId}`),\n  getAll: () => api.get(\"/orders\"),\n  // admin view\n  getOrderDetails: orderId => api.get(`/orders/details/${orderId}`)\n};\n\n// ==================================================\n//                    TRANSPORT APIS\n// ==================================================\nexport const transportAPI = {\n  // âœ… Assign transport to an order (Admin)\n  assignTransport: (orderId, data) => api.post(`/transports/assign/${orderId}`, data),\n  // âœ… Get assigned transports by transporter ID\n  getByTransporter: transporterId => api.get(`/transports/by-transporter/${transporterId}`),\n  // âœ… Update transport status (On the Way / Delivered)\n  updateStatus: (orderId, status) => api.put(`/transports/update-status/${orderId}`, {\n    status\n  })\n};\n\n// ==================================================\n//                    DEFAULT EXPORT\n// ==================================================\nexport default api;","map":{"version":3,"names":["axios","BASE_URL","api","create","baseURL","withCredentials","headers","Accept","interceptors","request","use","config","farmer","JSON","parse","localStorage","getItem","retailer","transporter","user","email","password","token","btoa","Authorization","err","console","warn","authAPI","farmerSignup","data","post","farmerLogin","retailerAuthAPI","signup","login","transporterAPI","getAll","get","farmerAPI","getAllFarmers","getFarmerById","id","productAPI","addProduct","formData","getMyProducts","getFarmerProducts","farmerId","getAllProducts","retailerAPI","getAllFarmersWithProducts","cartAPI","addToCart","retailerId","productId","quantity","getCart","updateQuantity","itemId","payload","put","removeItem","delete","clearCart","orderAPI","placeOrder","paymentMethod","getOrders","getOrderDetails","orderId","transportAPI","assignTransport","getByTransporter","transporterId","updateStatus","status"],"sources":["C:/Users/Maruti Mane/product_chain_tracker/src/services/api.js"],"sourcesContent":["// ==================================================\n// src/services/api.js\n// Centralized Axios API setup for all modules:\n// Farmer | Retailer | Transporter | Product | Order | Cart | Transport\n// ==================================================\n\nimport axios from \"axios\";\n\n// ==================================================\n//                    BASE SETUP\n// ==================================================\nconst BASE_URL = \"http://localhost:8080/api\";\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n  withCredentials: false, // Spring Boot app is stateless (no cookies)\n  headers: {\n    \"Content-Type\": \"application/json\",\n    Accept: \"application/json\",\n  },\n});\n\n// ==================================================\n//                AUTH INTERCEPTOR\n// ==================================================\napi.interceptors.request.use((config) => {\n  try {\n    const farmer = JSON.parse(localStorage.getItem(\"farmer\"));\n    const retailer = JSON.parse(localStorage.getItem(\"retailer\"));\n    const transporter = JSON.parse(localStorage.getItem(\"transporter\"));\n    const user = farmer || retailer || transporter;\n\n    // âœ… Add Basic Auth (for Spring Security)\n    if (user && user.email && user.password) {\n      const token = btoa(`${user.email}:${user.password}`);\n      config.headers.Authorization = `Basic ${token}`;\n    } else {\n      delete config.headers.Authorization;\n    }\n\n    // âœ… (Optional future JWT support)\n    // const token = localStorage.getItem(\"token\");\n    // if (token) config.headers.Authorization = `Bearer ${token}`;\n  } catch (err) {\n    console.warn(\"âš ï¸ Axios Interceptor Error:\", err);\n  }\n  return config;\n});\n\n// ==================================================\n//                    AUTH APIS\n// ==================================================\n\n// ðŸ‘¨â€ðŸŒ¾ Farmer Authentication\nexport const authAPI = {\n  farmerSignup: (data) => api.post(\"/auth/farmer/register\", data),\n  farmerLogin: (data) => api.post(\"/auth/farmer/login\", data),\n};\n\n// ðŸ›ï¸ Retailer Authentication\nexport const retailerAuthAPI = {\n  signup: (data) => api.post(\"/retailer/auth/signup\", data),\n  login: (data) => api.post(\"/retailer/auth/login\", data),\n};\n\n// ðŸšš Transporter Authentication\nexport const transporterAPI = {\n  signup: (data) => api.post(\"/transporters/signup\", data),\n  login: (data) => api.post(\"/transporters/login\", data),\n  getAll: () => api.get(\"/transporters\"), // for admin dropdown\n};\n\n// ==================================================\n//                    FARMER APIS\n// ==================================================\nexport const farmerAPI = {\n  getAllFarmers: () => api.get(\"/farmers\"),\n  getFarmerById: (id) => api.get(`/farmers/${id}`),\n};\n\n// ==================================================\n//                    PRODUCT APIS\n// ==================================================\nexport const productAPI = {\n  addProduct: (formData) =>\n    api.post(\"/products/add\", formData, {\n      headers: { \"Content-Type\": \"multipart/form-data\" },\n    }),\n\n  getMyProducts: () => api.get(\"/products/my\"),\n  getFarmerProducts: (farmerId) => api.get(`/products/farmer/${farmerId}`),\n  getAllProducts: () => api.get(\"/products\"),\n};\n\n// ==================================================\n//                    RETAILER APIS\n// ==================================================\nexport const retailerAPI = {\n  getAllFarmersWithProducts: () => api.get(\"/farmers/with-products\"),\n  getFarmerById: (farmerId) => api.get(`/farmers/${farmerId}`),\n};\n\n// ==================================================\n//                    CART APIS\n// ==================================================\nexport const cartAPI = {\n  addToCart: (retailerId, productId, quantity) =>\n    api.post(\n      \"/cart/add\",\n      { retailerId, productId, quantity },\n      { headers: { \"Content-Type\": \"application/json\" } }\n    ),\n\n  getCart: (retailerId) => api.get(`/cart/${retailerId}`),\n  updateQuantity: (itemId, payload) =>\n    api.put(`/cart/update/${itemId}`, payload, {\n      headers: { \"Content-Type\": \"application/json\" },\n    }),\n  removeItem: (itemId) => api.delete(`/cart/remove/${itemId}`),\n  clearCart: (retailerId) => api.delete(`/cart/clear/${retailerId}`),\n};\n\n// ==================================================\n//                    ORDER APIS\n// ==================================================\nexport const orderAPI = {\n  placeOrder: (retailerId, paymentMethod = \"Online\") =>\n    api.post(`/orders/place/${retailerId}?paymentMethod=${paymentMethod}`),\n\n  getOrders: (retailerId) => api.get(`/orders/${retailerId}`),\n  getAll: () => api.get(\"/orders\"), // admin view\n  getOrderDetails: (orderId) => api.get(`/orders/details/${orderId}`),\n};\n\n// ==================================================\n//                    TRANSPORT APIS\n// ==================================================\nexport const transportAPI = {\n  // âœ… Assign transport to an order (Admin)\n  assignTransport: (orderId, data) =>\n    api.post(`/transports/assign/${orderId}`, data),\n\n  // âœ… Get assigned transports by transporter ID\n  getByTransporter: (transporterId) =>\n    api.get(`/transports/by-transporter/${transporterId}`),\n\n  // âœ… Update transport status (On the Way / Delivered)\n  updateStatus: (orderId, status) =>\n    api.put(`/transports/update-status/${orderId}`, { status }),\n};\n\n// ==================================================\n//                    DEFAULT EXPORT\n// ==================================================\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}