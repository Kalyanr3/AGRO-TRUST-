{"ast":null,"code":"// ==================================================\n// src/services/api.js\n// Centralized API setup for Farmer, Retailer, Transporter, Products, Orders, Cart\n// ==================================================\n\nimport axios from \"axios\";\n\n// ==================================================\n//                    BASE SETUP\n// ==================================================\nconst BASE_URL = \"http://localhost:8080/api\";\nconst api = axios.create({\n  baseURL: BASE_URL,\n  withCredentials: false // âŒ disable cookies (your backend is stateless)\n});\n\n// ==================================================\n//                AUTH INTERCEPTOR\n// ==================================================\napi.interceptors.request.use(config => {\n  try {\n    const farmer = JSON.parse(localStorage.getItem(\"farmer\"));\n    const retailer = JSON.parse(localStorage.getItem(\"retailer\"));\n    const transporter = JSON.parse(localStorage.getItem(\"transporter\"));\n    const user = farmer || retailer || transporter;\n\n    // âœ… Add Basic Auth header (for backend using Spring Security basic login)\n    if (user && user.email && user.password) {\n      const token = btoa(`${user.email}:${user.password}`);\n      config.headers.Authorization = `Basic ${token}`;\n    } else {\n      // remove invalid auth if no user found\n      delete config.headers.Authorization;\n    }\n\n    // âœ… (Optional) JWT Auth header support (for future)\n    // const token = localStorage.getItem(\"token\");\n    // if (token) config.headers.Authorization = `Bearer ${token}`;\n  } catch (err) {\n    console.warn(\"âš ï¸ Axios Interceptor Error:\", err);\n  }\n  return config;\n});\n\n// ==================================================\n//                    AUTH APIS\n// ==================================================\n\n// ðŸ‘¨â€ðŸŒ¾ Farmer Authentication\nexport const authAPI = {\n  farmerSignup: data => api.post(\"/auth/farmer/register\", data),\n  farmerLogin: data => api.post(\"/auth/farmer/login\", data)\n};\n\n// ðŸ›ï¸ Retailer Authentication\nexport const retailerAuthAPI = {\n  signup: data => api.post(\"/retailer/auth/signup\", data),\n  login: data => api.post(\"/retailer/auth/login\", data)\n};\n\n// ðŸšš Transporter Authentication\nexport const transporterAuthAPI = {\n  signup: data => api.post(\"/transporters/signup\", data),\n  login: data => api.post(\"/transporters/login\", data)\n};\n\n// ==================================================\n//                    FARMER APIS\n// ==================================================\nexport const farmerAPI = {\n  getAllFarmers: () => api.get(\"/farmers\"),\n  getFarmerById: id => api.get(`/farmers/${id}`)\n};\n\n// ==================================================\n//                    PRODUCT APIS\n// ==================================================\nexport const productAPI = {\n  addProduct: formData => api.post(\"/products/add\", formData, {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\"\n    }\n  }),\n  getMyProducts: () => api.get(\"/products/my\"),\n  getFarmerProducts: farmerId => api.get(`/products/farmer/${farmerId}`),\n  getAllProducts: () => api.get(\"/products\")\n};\n\n// ==================================================\n//                    RETAILER APIS\n// ==================================================\nexport const retailerAPI = {\n  getAllFarmersWithProducts: () => api.get(\"/farmers/with-products\"),\n  getFarmerById: farmerId => api.get(`/farmers/${farmerId}`)\n};\n\n// ==================================================\n//                    CART APIS\n// ==================================================\nexport const cartAPI = {\n  addToCart: (retailerId, productId, quantity) => api.post(\"/cart/add\", {\n    retailerId,\n    productId,\n    quantity\n  }, {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }),\n  getCart: retailerId => api.get(`/cart/${retailerId}`),\n  updateQuantity: (itemId, payload) => api.put(`/cart/update/${itemId}`, payload, {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }),\n  removeItem: itemId => api.delete(`/cart/remove/${itemId}`),\n  clearCart: retailerId => api.delete(`/cart/clear/${retailerId}`)\n};\n\n// ==================================================\n//                    ORDER APIS\n// ==================================================\nexport const orderAPI = {\n  placeOrder: (retailerId, paymentMethod = \"Online\") => api.post(`/orders/place/${retailerId}?paymentMethod=${paymentMethod}`),\n  getOrders: retailerId => api.get(`/orders/${retailerId}`),\n  getOrderDetails: orderId => api.get(`/orders/details/${orderId}`)\n};\n\n// ==================================================\n//                    TRANSPORT APIS\n// ==================================================\nexport const transportAPI = {\n  // Assign transport\n  assignTransport: (orderId, data) => api.post(`/transport/assign/${orderId}`, data),\n  // Get all assigned orders for a transporter\n  getOrders: transporterId => api.get(`/transport/orders/${transporterId}`),\n  // Update delivery status\n  updateStatus: (orderId, status) => api.put(`/transport/${orderId}/status?status=${status}`)\n};\n\n// ==================================================\n//                    DEFAULT EXPORT\n// ==================================================\nexport default api;","map":{"version":3,"names":["axios","BASE_URL","api","create","baseURL","withCredentials","interceptors","request","use","config","farmer","JSON","parse","localStorage","getItem","retailer","transporter","user","email","password","token","btoa","headers","Authorization","err","console","warn","authAPI","farmerSignup","data","post","farmerLogin","retailerAuthAPI","signup","login","transporterAuthAPI","farmerAPI","getAllFarmers","get","getFarmerById","id","productAPI","addProduct","formData","getMyProducts","getFarmerProducts","farmerId","getAllProducts","retailerAPI","getAllFarmersWithProducts","cartAPI","addToCart","retailerId","productId","quantity","getCart","updateQuantity","itemId","payload","put","removeItem","delete","clearCart","orderAPI","placeOrder","paymentMethod","getOrders","getOrderDetails","orderId","transportAPI","assignTransport","transporterId","updateStatus","status"],"sources":["C:/Users/Maruti Mane/product_chain_tracker/src/services/api.js"],"sourcesContent":["// ==================================================\n// src/services/api.js\n// Centralized API setup for Farmer, Retailer, Transporter, Products, Orders, Cart\n// ==================================================\n\nimport axios from \"axios\";\n\n// ==================================================\n//                    BASE SETUP\n// ==================================================\nconst BASE_URL = \"http://localhost:8080/api\";\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n  withCredentials: false, // âŒ disable cookies (your backend is stateless)\n});\n\n// ==================================================\n//                AUTH INTERCEPTOR\n// ==================================================\napi.interceptors.request.use((config) => {\n  try {\n    const farmer = JSON.parse(localStorage.getItem(\"farmer\"));\n    const retailer = JSON.parse(localStorage.getItem(\"retailer\"));\n    const transporter = JSON.parse(localStorage.getItem(\"transporter\"));\n    const user = farmer || retailer || transporter;\n\n    // âœ… Add Basic Auth header (for backend using Spring Security basic login)\n    if (user && user.email && user.password) {\n      const token = btoa(`${user.email}:${user.password}`);\n      config.headers.Authorization = `Basic ${token}`;\n    } else {\n      // remove invalid auth if no user found\n      delete config.headers.Authorization;\n    }\n\n    // âœ… (Optional) JWT Auth header support (for future)\n    // const token = localStorage.getItem(\"token\");\n    // if (token) config.headers.Authorization = `Bearer ${token}`;\n  } catch (err) {\n    console.warn(\"âš ï¸ Axios Interceptor Error:\", err);\n  }\n  return config;\n});\n\n// ==================================================\n//                    AUTH APIS\n// ==================================================\n\n// ðŸ‘¨â€ðŸŒ¾ Farmer Authentication\nexport const authAPI = {\n  farmerSignup: (data) => api.post(\"/auth/farmer/register\", data),\n  farmerLogin: (data) => api.post(\"/auth/farmer/login\", data),\n};\n\n// ðŸ›ï¸ Retailer Authentication\nexport const retailerAuthAPI = {\n  signup: (data) => api.post(\"/retailer/auth/signup\", data),\n  login: (data) => api.post(\"/retailer/auth/login\", data),\n};\n\n// ðŸšš Transporter Authentication\nexport const transporterAuthAPI = {\n  signup: (data) => api.post(\"/transporters/signup\", data),\n  login: (data) => api.post(\"/transporters/login\", data),\n};\n\n// ==================================================\n//                    FARMER APIS\n// ==================================================\nexport const farmerAPI = {\n  getAllFarmers: () => api.get(\"/farmers\"),\n  getFarmerById: (id) => api.get(`/farmers/${id}`),\n};\n\n// ==================================================\n//                    PRODUCT APIS\n// ==================================================\nexport const productAPI = {\n  addProduct: (formData) =>\n    api.post(\"/products/add\", formData, {\n      headers: { \"Content-Type\": \"multipart/form-data\" },\n    }),\n\n  getMyProducts: () => api.get(\"/products/my\"),\n  getFarmerProducts: (farmerId) => api.get(`/products/farmer/${farmerId}`),\n  getAllProducts: () => api.get(\"/products\"),\n};\n\n// ==================================================\n//                    RETAILER APIS\n// ==================================================\nexport const retailerAPI = {\n  getAllFarmersWithProducts: () => api.get(\"/farmers/with-products\"),\n  getFarmerById: (farmerId) => api.get(`/farmers/${farmerId}`),\n};\n\n// ==================================================\n//                    CART APIS\n// ==================================================\nexport const cartAPI = {\n  addToCart: (retailerId, productId, quantity) =>\n    api.post(\n      \"/cart/add\",\n      { retailerId, productId, quantity },\n      { headers: { \"Content-Type\": \"application/json\" } }\n    ),\n\n  getCart: (retailerId) => api.get(`/cart/${retailerId}`),\n  updateQuantity: (itemId, payload) =>\n    api.put(`/cart/update/${itemId}`, payload, {\n      headers: { \"Content-Type\": \"application/json\" },\n    }),\n  removeItem: (itemId) => api.delete(`/cart/remove/${itemId}`),\n  clearCart: (retailerId) => api.delete(`/cart/clear/${retailerId}`),\n};\n\n// ==================================================\n//                    ORDER APIS\n// ==================================================\nexport const orderAPI = {\n  placeOrder: (retailerId, paymentMethod = \"Online\") =>\n    api.post(`/orders/place/${retailerId}?paymentMethod=${paymentMethod}`),\n\n  getOrders: (retailerId) => api.get(`/orders/${retailerId}`),\n\n  getOrderDetails: (orderId) => api.get(`/orders/details/${orderId}`),\n};\n\n// ==================================================\n//                    TRANSPORT APIS\n// ==================================================\nexport const transportAPI = {\n  // Assign transport\n  assignTransport: (orderId, data) =>\n    api.post(`/transport/assign/${orderId}`, data),\n\n  // Get all assigned orders for a transporter\n  getOrders: (transporterId) => api.get(`/transport/orders/${transporterId}`),\n\n  // Update delivery status\n  updateStatus: (orderId, status) =>\n    api.put(`/transport/${orderId}/status?status=${status}`),\n};\n\n\n// ==================================================\n//                    DEFAULT EXPORT\n// ==================================================\nexport default api;\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA;AACA;AACA,MAAMC,QAAQ,GAAG,2BAA2B;AAE5C,MAAMC,GAAG,GAAGF,KAAK,CAACG,MAAM,CAAC;EACvBC,OAAO,EAAEH,QAAQ;EACjBI,eAAe,EAAE,KAAK,CAAE;AAC1B,CAAC,CAAC;;AAEF;AACA;AACA;AACAH,GAAG,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EACvC,IAAI;IACF,MAAMC,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC;IACzD,MAAMC,QAAQ,GAAGJ,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC;IAC7D,MAAME,WAAW,GAAGL,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAAC;IACnE,MAAMG,IAAI,GAAGP,MAAM,IAAIK,QAAQ,IAAIC,WAAW;;IAE9C;IACA,IAAIC,IAAI,IAAIA,IAAI,CAACC,KAAK,IAAID,IAAI,CAACE,QAAQ,EAAE;MACvC,MAAMC,KAAK,GAAGC,IAAI,CAAC,GAAGJ,IAAI,CAACC,KAAK,IAAID,IAAI,CAACE,QAAQ,EAAE,CAAC;MACpDV,MAAM,CAACa,OAAO,CAACC,aAAa,GAAG,SAASH,KAAK,EAAE;IACjD,CAAC,MAAM;MACL;MACA,OAAOX,MAAM,CAACa,OAAO,CAACC,aAAa;IACrC;;IAEA;IACA;IACA;EACF,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZC,OAAO,CAACC,IAAI,CAAC,6BAA6B,EAAEF,GAAG,CAAC;EAClD;EACA,OAAOf,MAAM;AACf,CAAC,CAAC;;AAEF;AACA;AACA;;AAEA;AACA,OAAO,MAAMkB,OAAO,GAAG;EACrBC,YAAY,EAAGC,IAAI,IAAK3B,GAAG,CAAC4B,IAAI,CAAC,uBAAuB,EAAED,IAAI,CAAC;EAC/DE,WAAW,EAAGF,IAAI,IAAK3B,GAAG,CAAC4B,IAAI,CAAC,oBAAoB,EAAED,IAAI;AAC5D,CAAC;;AAED;AACA,OAAO,MAAMG,eAAe,GAAG;EAC7BC,MAAM,EAAGJ,IAAI,IAAK3B,GAAG,CAAC4B,IAAI,CAAC,uBAAuB,EAAED,IAAI,CAAC;EACzDK,KAAK,EAAGL,IAAI,IAAK3B,GAAG,CAAC4B,IAAI,CAAC,sBAAsB,EAAED,IAAI;AACxD,CAAC;;AAED;AACA,OAAO,MAAMM,kBAAkB,GAAG;EAChCF,MAAM,EAAGJ,IAAI,IAAK3B,GAAG,CAAC4B,IAAI,CAAC,sBAAsB,EAAED,IAAI,CAAC;EACxDK,KAAK,EAAGL,IAAI,IAAK3B,GAAG,CAAC4B,IAAI,CAAC,qBAAqB,EAAED,IAAI;AACvD,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMO,SAAS,GAAG;EACvBC,aAAa,EAAEA,CAAA,KAAMnC,GAAG,CAACoC,GAAG,CAAC,UAAU,CAAC;EACxCC,aAAa,EAAGC,EAAE,IAAKtC,GAAG,CAACoC,GAAG,CAAC,YAAYE,EAAE,EAAE;AACjD,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMC,UAAU,GAAG;EACxBC,UAAU,EAAGC,QAAQ,IACnBzC,GAAG,CAAC4B,IAAI,CAAC,eAAe,EAAEa,QAAQ,EAAE;IAClCrB,OAAO,EAAE;MAAE,cAAc,EAAE;IAAsB;EACnD,CAAC,CAAC;EAEJsB,aAAa,EAAEA,CAAA,KAAM1C,GAAG,CAACoC,GAAG,CAAC,cAAc,CAAC;EAC5CO,iBAAiB,EAAGC,QAAQ,IAAK5C,GAAG,CAACoC,GAAG,CAAC,oBAAoBQ,QAAQ,EAAE,CAAC;EACxEC,cAAc,EAAEA,CAAA,KAAM7C,GAAG,CAACoC,GAAG,CAAC,WAAW;AAC3C,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMU,WAAW,GAAG;EACzBC,yBAAyB,EAAEA,CAAA,KAAM/C,GAAG,CAACoC,GAAG,CAAC,wBAAwB,CAAC;EAClEC,aAAa,EAAGO,QAAQ,IAAK5C,GAAG,CAACoC,GAAG,CAAC,YAAYQ,QAAQ,EAAE;AAC7D,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMI,OAAO,GAAG;EACrBC,SAAS,EAAEA,CAACC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,KACzCpD,GAAG,CAAC4B,IAAI,CACN,WAAW,EACX;IAAEsB,UAAU;IAAEC,SAAS;IAAEC;EAAS,CAAC,EACnC;IAAEhC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB;EAAE,CACpD,CAAC;EAEHiC,OAAO,EAAGH,UAAU,IAAKlD,GAAG,CAACoC,GAAG,CAAC,SAASc,UAAU,EAAE,CAAC;EACvDI,cAAc,EAAEA,CAACC,MAAM,EAAEC,OAAO,KAC9BxD,GAAG,CAACyD,GAAG,CAAC,gBAAgBF,MAAM,EAAE,EAAEC,OAAO,EAAE;IACzCpC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB;EAChD,CAAC,CAAC;EACJsC,UAAU,EAAGH,MAAM,IAAKvD,GAAG,CAAC2D,MAAM,CAAC,gBAAgBJ,MAAM,EAAE,CAAC;EAC5DK,SAAS,EAAGV,UAAU,IAAKlD,GAAG,CAAC2D,MAAM,CAAC,eAAeT,UAAU,EAAE;AACnE,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMW,QAAQ,GAAG;EACtBC,UAAU,EAAEA,CAACZ,UAAU,EAAEa,aAAa,GAAG,QAAQ,KAC/C/D,GAAG,CAAC4B,IAAI,CAAC,iBAAiBsB,UAAU,kBAAkBa,aAAa,EAAE,CAAC;EAExEC,SAAS,EAAGd,UAAU,IAAKlD,GAAG,CAACoC,GAAG,CAAC,WAAWc,UAAU,EAAE,CAAC;EAE3De,eAAe,EAAGC,OAAO,IAAKlE,GAAG,CAACoC,GAAG,CAAC,mBAAmB8B,OAAO,EAAE;AACpE,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMC,YAAY,GAAG;EAC1B;EACAC,eAAe,EAAEA,CAACF,OAAO,EAAEvC,IAAI,KAC7B3B,GAAG,CAAC4B,IAAI,CAAC,qBAAqBsC,OAAO,EAAE,EAAEvC,IAAI,CAAC;EAEhD;EACAqC,SAAS,EAAGK,aAAa,IAAKrE,GAAG,CAACoC,GAAG,CAAC,qBAAqBiC,aAAa,EAAE,CAAC;EAE3E;EACAC,YAAY,EAAEA,CAACJ,OAAO,EAAEK,MAAM,KAC5BvE,GAAG,CAACyD,GAAG,CAAC,cAAcS,OAAO,kBAAkBK,MAAM,EAAE;AAC3D,CAAC;;AAGD;AACA;AACA;AACA,eAAevE,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}