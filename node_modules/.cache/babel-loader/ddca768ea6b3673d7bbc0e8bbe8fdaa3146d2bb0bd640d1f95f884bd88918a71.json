{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Maruti Mane\\\\product_chain_tracker\\\\src\\\\components\\\\TransportDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { transporterAPI, orderAPI } from \"../services/api\";\nimport \"./TransportDashboard.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TransportDashboard = () => {\n  _s();\n  // Logged-in transporter data from localStorage\n  const storedUser = JSON.parse(localStorage.getItem(\"user\"));\n  const userType = localStorage.getItem(\"userType\");\n  const transporterId = userType === \"transporter\" ? storedUser === null || storedUser === void 0 ? void 0 : storedUser.id : null;\n  const [orders, setOrders] = useState([]);\n\n  // ---------------------------\n  // Load assigned orders\n  // ---------------------------\n  useEffect(() => {\n    if (transporterId) {\n      loadAssignedOrders(transporterId);\n    }\n  }, [transporterId]);\n  const loadAssignedOrders = async id => {\n    try {\n      const res = await transporterAPI.getOrdersForTransporter(id);\n      setOrders(res.data || []);\n    } catch (err) {\n      console.error(\"‚ùå Failed to load transporter orders:\", err);\n    }\n  };\n\n  // ---------------------------\n  // Update order delivery status\n  // ---------------------------\n  const updateStatus = async (orderId, status) => {\n    try {\n      await orderAPI.updateTransportStatus(orderId, status);\n      alert(`‚úî Status updated to ${status}`);\n      setOrders(prev => prev.map(o => o.id === orderId ? {\n        ...o,\n        status\n      } : o));\n    } catch (err) {\n      console.error(\"‚ùå Failed to update delivery status:\", err);\n      alert(\"Failed to update delivery status\");\n    }\n  };\n\n  // --------------------------------\n  // If NOT logged in as transporter\n  // --------------------------------\n  if (!transporterId) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"No transporter logged in!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Please login again.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"transport-dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\uD83D\\uDE9A Transporter Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Welcome, \", storedUser === null || storedUser === void 0 ? void 0 : storedUser.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), orders.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No assigned deliveries yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"orders-list\",\n      children: orders.map(order => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"order-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Order #\", order.id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Status:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 18\n          }, this), \" \", order.status]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Farmer ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 18\n          }, this), \" \", order.farmerId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Total Amount:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 18\n          }, this), \" \\u20B9\", order.totalAmount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Vehicle:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 18\n          }, this), \" \", order.vehicleNo || \"-\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Driver:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 18\n          }, this), \" \", order.driverName || \"-\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"actions\",\n          children: [order.status === \"ASSIGNED_TO_TRANSPORTER\" && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"pickup-btn\",\n            onClick: () => updateStatus(order.id, \"OUT_FOR_DELIVERY\"),\n            children: \"\\uD83D\\uDE9A Mark Picked Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 19\n          }, this), order.status !== \"DELIVERED\" && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"deliver-btn\",\n            onClick: () => updateStatus(order.id, \"DELIVERED\"),\n            children: \"\\u2714 Mark Delivered\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }, this)]\n      }, order.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(TransportDashboard, \"FvMuVccH6DXI6fqfhJiN/VsjZaw=\");\n_c = TransportDashboard;\nexport default TransportDashboard;\nvar _c;\n$RefreshReg$(_c, \"TransportDashboard\");","map":{"version":3,"names":["React","useEffect","useState","transporterAPI","orderAPI","jsxDEV","_jsxDEV","TransportDashboard","_s","storedUser","JSON","parse","localStorage","getItem","userType","transporterId","id","orders","setOrders","loadAssignedOrders","res","getOrdersForTransporter","data","err","console","error","updateStatus","orderId","status","updateTransportStatus","alert","prev","map","o","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","className","name","length","order","farmerId","totalAmount","vehicleNo","driverName","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Maruti Mane/product_chain_tracker/src/components/TransportDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { transporterAPI, orderAPI } from \"../services/api\"; \nimport \"./TransportDashboard.css\";\n\nconst TransportDashboard = () => {\n  // Logged-in transporter data from localStorage\n  const storedUser = JSON.parse(localStorage.getItem(\"user\"));\n  const userType = localStorage.getItem(\"userType\");\n\n  const transporterId =\n    userType === \"transporter\" ? storedUser?.id : null;\n\n  const [orders, setOrders] = useState([]);\n\n  // ---------------------------\n  // Load assigned orders\n  // ---------------------------\n  useEffect(() => {\n    if (transporterId) {\n      loadAssignedOrders(transporterId);\n    }\n  }, [transporterId]);\n\n  const loadAssignedOrders = async (id) => {\n    try {\n      const res = await transporterAPI.getOrdersForTransporter(id);\n      setOrders(res.data || []);\n    } catch (err) {\n      console.error(\"‚ùå Failed to load transporter orders:\", err);\n    }\n  };\n\n  // ---------------------------\n  // Update order delivery status\n  // ---------------------------\n  const updateStatus = async (orderId, status) => {\n    try {\n      await orderAPI.updateTransportStatus(orderId, status);\n\n      alert(`‚úî Status updated to ${status}`);\n\n      setOrders((prev) =>\n        prev.map((o) => (o.id === orderId ? { ...o, status } : o))\n      );\n    } catch (err) {\n      console.error(\"‚ùå Failed to update delivery status:\", err);\n      alert(\"Failed to update delivery status\");\n    }\n  };\n\n  // --------------------------------\n  // If NOT logged in as transporter\n  // --------------------------------\n  if (!transporterId) {\n    return (\n      <div style={{ padding: \"20px\" }}>\n        <h2>No transporter logged in!</h2>\n        <p>Please login again.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"transport-dashboard\">\n      <h1>üöö Transporter Dashboard</h1>\n      <h3>Welcome, {storedUser?.name}</h3>\n\n      {orders.length === 0 ? (\n        <p>No assigned deliveries yet.</p>\n      ) : (\n        <div className=\"orders-list\">\n          {orders.map((order) => (\n            <div className=\"order-card\" key={order.id}>\n              <h3>Order #{order.id}</h3>\n\n              <p><b>Status:</b> {order.status}</p>\n              <p><b>Farmer ID:</b> {order.farmerId}</p>\n              <p><b>Total Amount:</b> ‚Çπ{order.totalAmount}</p>\n\n              <p><b>Vehicle:</b> {order.vehicleNo || \"-\"}</p>\n              <p><b>Driver:</b> {order.driverName || \"-\"}</p>\n\n              <div className=\"actions\">\n                {order.status === \"ASSIGNED_TO_TRANSPORTER\" && (\n                  <button\n                    className=\"pickup-btn\"\n                    onClick={() =>\n                      updateStatus(order.id, \"OUT_FOR_DELIVERY\")\n                    }\n                  >\n                    üöö Mark Picked Up\n                  </button>\n                )}\n\n                {order.status !== \"DELIVERED\" && (\n                  <button\n                    className=\"deliver-btn\"\n                    onClick={() =>\n                      updateStatus(order.id, \"DELIVERED\")\n                    }\n                  >\n                    ‚úî Mark Delivered\n                  </button>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TransportDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}