{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Maruti Mane\\\\product_chain_tracker\\\\src\\\\components\\\\TransportDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { transportAPI } from \"../services/api\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TransportDashboard = () => {\n  _s();\n  const navigate = useNavigate();\n  const transporter = JSON.parse(localStorage.getItem(\"transporter\"));\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    if (!transporter) {\n      navigate(\"/transport/login\");\n      return;\n    }\n    (async () => {\n      try {\n        const res = await transportAPI.getOrders(transporter.id);\n        setOrders(res.data || []);\n      } catch (err) {\n        console.error(\"Error loading orders:\", err);\n        alert(\"Failed to load assigned deliveries.\");\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, [transporter, navigate]);\n  const updateStatus = async (orderId, status) => {\n    try {\n      await transportAPI.updateStatus(orderId, status);\n      alert(`✅ Order marked as ${status}!`);\n      setOrders(prev => prev.map(o => o.order.id === orderId ? {\n        ...o,\n        status\n      } : o));\n    } catch {\n      alert(\"❌ Failed to update status.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Welcome, \", transporter === null || transporter === void 0 ? void 0 : transporter.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this) : orders.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No deliveries assigned yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Order ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Farmer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Retailer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Action\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: orders.map(o => {\n          var _o$order$farmer, _o$order$retailer;\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: [\"#\", o.order.id]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: (_o$order$farmer = o.order.farmer) === null || _o$order$farmer === void 0 ? void 0 : _o$order$farmer.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: (_o$order$retailer = o.order.retailer) === null || _o$order$retailer === void 0 ? void 0 : _o$order$retailer.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: o.status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: o.status !== \"Delivered\" && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => updateStatus(o.order.id, \"Delivered\"),\n                children: \"\\u2705 Mark Delivered\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 17\n            }, this)]\n          }, o.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n_s(TransportDashboard, \"+NVB8artee/SF+4PV4Hge4eY4/g=\", false, function () {\n  return [useNavigate];\n});\n_c = TransportDashboard;\nexport default TransportDashboard;\nvar _c;\n$RefreshReg$(_c, \"TransportDashboard\");","map":{"version":3,"names":["React","useEffect","useState","transportAPI","useNavigate","jsxDEV","_jsxDEV","TransportDashboard","_s","navigate","transporter","JSON","parse","localStorage","getItem","orders","setOrders","loading","setLoading","res","getOrders","id","data","err","console","error","alert","updateStatus","orderId","status","prev","map","o","order","children","name","fileName","_jsxFileName","lineNumber","columnNumber","length","_o$order$farmer","_o$order$retailer","farmer","retailer","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Maruti Mane/product_chain_tracker/src/components/TransportDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { transportAPI } from \"../services/api\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst TransportDashboard = () => {\n  const navigate = useNavigate();\n  const transporter = JSON.parse(localStorage.getItem(\"transporter\"));\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!transporter) {\n      navigate(\"/transport/login\");\n      return;\n    }\n    (async () => {\n      try {\n        const res = await transportAPI.getOrders(transporter.id);\n        setOrders(res.data || []);\n      } catch (err) {\n        console.error(\"Error loading orders:\", err);\n        alert(\"Failed to load assigned deliveries.\");\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, [transporter, navigate]);\n\n  const updateStatus = async (orderId, status) => {\n    try {\n      await transportAPI.updateStatus(orderId, status);\n      alert(`✅ Order marked as ${status}!`);\n      setOrders((prev) =>\n        prev.map((o) =>\n          o.order.id === orderId ? { ...o, status } : o\n        )\n      );\n    } catch {\n      alert(\"❌ Failed to update status.\");\n    }\n  };\n\n  return (\n    <div>\n      <h2>Welcome, {transporter?.name}</h2>\n      {loading ? (\n        <p>Loading...</p>\n      ) : orders.length === 0 ? (\n        <p>No deliveries assigned yet.</p>\n      ) : (\n        <table>\n          <thead>\n            <tr>\n              <th>Order ID</th>\n              <th>Farmer</th>\n              <th>Retailer</th>\n              <th>Status</th>\n              <th>Action</th>\n            </tr>\n          </thead>\n          <tbody>\n            {orders.map((o) => (\n              <tr key={o.id}>\n                <td>#{o.order.id}</td>\n                <td>{o.order.farmer?.name}</td>\n                <td>{o.order.retailer?.name}</td>\n                <td>{o.status}</td>\n                <td>\n                  {o.status !== \"Delivered\" && (\n                    <button onClick={() => updateStatus(o.order.id, \"Delivered\")}>\n                      ✅ Mark Delivered\n                    </button>\n                  )}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n};\n\nexport default TransportDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}